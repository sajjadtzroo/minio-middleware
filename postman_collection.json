{
	"info": {
		"_postman_id": "minio-middleware-api",
		"name": "MinIO Middleware API",
		"description": "Complete API collection for the MinIO Middleware uploader service written in Go. This service provides file upload/download capabilities through Telegram bots and direct storage.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "minio-middleware"
	},
	"item": [
		{
			"name": "Telegram Bot Operations",
			"item": [
				{
					"name": "Upload File to Telegram Bot",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"description": "JWT token for authentication"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": [],
									"description": "File to upload"
								},
								{
									"key": "botName",
									"value": "relic",
									"description": "Optional: Specific bot name to use (e.g., 'relic', 'backup', 'main')",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/upload/telegram/:botName",
							"host": ["{{base_url}}"],
							"path": ["upload", "telegram", ":botName"],
							"variable": [
								{
									"key": "botName",
									"value": "telegram",
									"description": "Bot scope (instagram, telegram, tracker, influencer)"
								}
							]
						},
						"description": "Upload any file to selected telegram bot scope. BACKWARD COMPATIBLE: Defaults to 'relic' bot when no specific bot is specified. You can specify which bot to use via 'botName' form field OR use URL path '/upload/telegram/scope/botname'."
					},
					"response": []
				},
				{
					"name": "Upload File to Telegram Bot via Link",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"description": "JWT token for authentication"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"link\": \"https://example.com/file.jpg\",\n    \"botName\": \"relic\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/upload/telegram/link/:botName",
							"host": ["{{base_url}}"],
							"path": ["upload", "telegram", "link", ":botName"],
							"variable": [
								{
									"key": "botName",
									"value": "telegram",
									"description": "Bot name (instagram, telegram, tracker, influencer)"
								}
							]
						},
						"description": "Upload a file from URL to telegram bot. Response includes which specific named bot was used for the upload. Server logs show detailed bot racing information including which bot won the race."
					},
					"response": []
				},
				{
					"name": "Download File from Telegram Bot",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/instant/:botName/:fileId?bot=relic",
							"host": ["{{base_url}}"],
							"path": ["instant", ":botName", ":fileId"],
							"query": [
								{
									"key": "bot",
									"value": "relic",
									"description": "Optional: Specific bot name to use for download"
								}
							],
							"variable": [
								{
									"key": "botName",
									"value": "telegram",
									"description": "Bot scope (instagram, telegram, tracker, influencer)"
								},
								{
									"key": "fileId",
									"value": "BAADBAADXwADBREAAWdXAQABFiJ7owABAg",
									"description": "Telegram file ID"
								}
							]
						},
						"description": "Get a file from bot bucket without extension needing - If not exists, it will download it from telegram. BACKWARD COMPATIBLE: Defaults to racing mode when no specific bot is specified. You can specify which bot to use via 'bot' query parameter OR use URL path '/instant/scope/fileId/botname'."
					},
					"response": []
				},
				{
					"name": "Download File from Specific Bot (URL Param)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/instant/:botName/:fileId/:specificBot",
							"host": ["{{base_url}}"],
							"path": ["instant", ":botName", ":fileId", ":specificBot"],
							"variable": [
								{
									"key": "botName",
									"value": "telegram",
									"description": "Bot scope (instagram, telegram, tracker, influencer)"
								},
								{
									"key": "fileId",
									"value": "BAADBAADXwADBREAAWdXAQABFiJ7owABAg",
									"description": "Telegram file ID"
								},
								{
									"key": "specificBot",
									"value": "relic",
									"description": "Specific bot name (relic, backup, main, etc.)"
								}
							]
						},
						"description": "Download file using a specific named bot specified in the URL path. This is the same endpoint as the basic download but with an additional path parameter. URL parameter takes priority over query parameter. Response includes 'X-Downloaded-By' header showing which bot was used."
					},
					"response": []
				},
				{
					"name": "Transfer File Between Bots",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fileId\": \"BAADBAADXwADBREAAWdXAQABFiJ7owABAg\",\n    \"chatId\": \"-1001234567890\",\n    \"botToken\": \"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz\",\n    \"botName\": \"telegram\",\n    \"preferredBotName\": \"relic\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/transfer/telegram",
							"host": ["{{base_url}}"],
							"path": ["transfer", "telegram"]
						},
						"description": "Transfer a file from one bot to another using bot token. By default uses 'relic' bot or first available. You can specify which specific bot to use via 'preferredBotName' field. Response includes which bot was used for the transfer."
					},
					"response": []
				},
				{
					"name": "Upload File to Specific Bot (URL Param)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"description": "JWT token for authentication"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": [],
									"description": "File to upload"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/upload/telegram/:botName/:specificBot",
							"host": ["{{base_url}}"],
							"path": ["upload", "telegram", ":botName", ":specificBot"],
							"variable": [
								{
									"key": "botName",
									"value": "telegram",
									"description": "Bot scope (instagram, telegram, tracker, influencer)"
								},
								{
									"key": "specificBot",
									"value": "relic",
									"description": "Specific bot name (relic, backup, main, etc.)"
								}
							]
						},
						"description": "Upload file using a specific named bot specified in the URL path. This is the same endpoint as the basic upload but with an additional path parameter. URL parameter takes priority over form field."
					},
					"response": []
				}
			],
			"description": "Operations related to Telegram bot file management"
		},
		{
			"name": "Direct Storage Operations",
			"item": [
				{
					"name": "Upload File to Direct Storage",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{jwt_token}}",
								"description": "JWT token for authentication"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": [],
									"description": "File to upload"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/direct/:bucketName",
							"host": ["{{base_url}}"],
							"path": ["direct", ":bucketName"],
							"variable": [
								{
									"key": "bucketName",
									"value": "instagram",
									"description": "Bucket name (instagram, telegram, tracker, influencer)"
								}
							]
						},
						"description": "Upload a file to specific bucket in direct storage"
					},
					"response": []
				},
				{
					"name": "Download File from Direct Storage",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/direct/:bucketName/:path",
							"host": ["{{base_url}}"],
							"path": ["direct", ":bucketName", ":path"],
							"variable": [
								{
									"key": "bucketName",
									"value": "instagram",
									"description": "Bucket name"
								},
								{
									"key": "path",
									"value": "filename.jpg",
									"description": "File path in bucket"
								}
							]
						},
						"description": "Get a file from specific bucket in direct storage"
					},
					"response": []
				},
				{
					"name": "Upload from Link to Storage",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"link\": \"https://example.com/image.jpg\",\n    \"bucket\": \"instagram\",\n    \"fileName\": \"my-image\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/instant/link",
							"host": ["{{base_url}}"],
							"path": ["instant", "link"]
						},
						"description": "Upload a URL to a bucket from a link. FileName as fileName, Bucket as bucketName"
					},
					"response": []
				}
			],
			"description": "Direct storage operations for file management"
		},
		{
			"name": "Profile Operations",
			"item": [
				{
					"name": "Download Instagram Profile Picture",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile/instagram/:pk/:userName",
							"host": ["{{base_url}}"],
							"path": ["profile", "instagram", ":pk", ":userName"],
							"variable": [
								{
									"key": "pk",
									"value": "123456789",
									"description": "Profile primary key/ID"
								},
								{
									"key": "userName",
									"value": "username",
									"description": "Instagram username"
								}
							]
						},
						"description": "Get Instagram profile picture"
					},
					"response": []
				},
				{
					"name": "Download Telegram Profile Picture",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile/telegram/:pk/:userName",
							"host": ["{{base_url}}"],
							"path": ["profile", "telegram", ":pk", ":userName"],
							"variable": [
								{
									"key": "pk",
									"value": "123456789",
									"description": "Profile primary key/ID"
								},
								{
									"key": "userName",
									"value": "@channelname",
									"description": "Telegram channel/username (use @ for public channels)"
								}
							]
						},
						"description": "Get Telegram profile picture. If Telegram Public channel use @ at first of them"
					},
					"response": []
				}
			],
			"description": "Social media profile picture operations"
		},
		{
			"name": "Utility Operations",
			"item": [
				{
					"name": "Zip Multiple Files",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "text/plain"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "W1sidGVsZWdyYW0iLCJCQUFEQkFBRFh3QURCRUVBQVDXAQABF2J7b3dBQkFnIl0sWyJpbnN0YWdyYW0iLCJCQUFEQkFBRFl3QURCRUVBQVDXAQABF2J7b3dBQkFnIl1d",
							"description": "Base64 encoded JSON array of [botName, fileId] pairs"
						},
						"url": {
							"raw": "{{base_url}}/zip/multi",
							"host": ["{{base_url}}"],
							"path": ["zip", "multi"]
						},
						"description": "Create a ZIP archive containing multiple files from different bots. Body should be base64 encoded JSON array of [botName, fileId] pairs."
					},
					"response": []
				},
				{
					"name": "List Bot Scopes",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/bot-scopes",
							"host": ["{{base_url}}"],
							"path": ["bot-scopes"]
						},
						"description": "Get all available bot scopes with their named bots. Environment variables support both formats:\n\n1. Named format: BOT_TELEGRAM=relic<token1>,backup<token2>,main<token3>\n2. Auto-named format: BOT_TELEGRAM=token1,token2,token3 (first becomes 'relic', others get numbered)\n\nShows scope names and bot names configured in .env file."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/bot-scopes",
									"host": ["{{base_url}}"],
									"path": ["bot-scopes"]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"result\": true,\n    \"scopes\": {\n        \"telegram\": [\"relic\", \"backup\", \"main\"],\n        \"instagram\": [\"primary\"],\n        \"tracker\": [\"relic\", \"secondary\"],\n        \"influencer\": [\"main\", \"backup\", \"emergency\"]\n    }\n}"
						}
					]
				}
			],
			"description": "Utility operations for file management"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"description": "Base URL for the API server"
		},
		{
			"key": "jwt_token",
			"value": "your_jwt_token_here",
			"description": "JWT token for authenticated endpoints"
		}
	]
} 